指针
===

## 知识点
* 局部指针可以不用初始化或指定为NULL；
* void*可以定义变量，但在使用时需要强制类型转换；
* 不要对**没有初始化**、**初始化为NULL**的指针进行`*`操作; 不要对指针进行赋值操作（赋值是指向内存地址）；
* 数组名也是指针，代表数组首个元素的地址；
* 字符串指针可以操作数组指针，例如char**，代码可参考[ptr_array_1.c](ptr_array_1.c);
* 函数内部修改外部变量的值需要传外部变量的地址；
* 一维数组作为函数的形参会被优化成一级指针；
* 不建议使用函数返回内部变量的指针，因为函数执行结束后会被回收，如果硬要这么做，需要将返回值设置从静态变量`static int num = 1000; return &num;`;
* 函数名代表的是函数入口地址,也是能被作指针操作，代码可参考[ptr_func.c](ptr_func.c);

## 重点
### 野指针
野指针指向一个已删除的对象或未申请访问受限内存区域的指针。与空指针不同，野指针无法通过简单地判断是否为 NULL避免，而只能通过养成良好的编程习惯来尽力减少。对野指针进行操作很容易造成程序错误。 产生原因如下:

* **指针变量未初始化**: 任何指针变量刚被创建时不会自动成为NULL指针，它的缺省值是随机的，它会乱指一气。所以，指针变量在创建的同时应当被初始化，要么将指针设置为NULL，要么让它指向合法的内存。

* **指针释放后未置空**: 有时指针在free或delete后未赋值 NULL，便会使人以为是合法的。别看free和delete的名字（尤其是delete），它们只是把指针所指的内存给释放掉，但并没有把指针本身干掉。此时指针指向的就是“垃圾”内存。释放后的指针应立即将指针置为NULL，防止产生“野指针”。

* **指针操作超越变量作用域**: 不要返回指向栈内存的指针或引用，因为栈内存在函数结束时会被释放.

#### 如何避免
* 初始化时设置为NULL
* 释放时设置为NULL

## 示例

### 函数指针 作为函数的形参
```c
int sub(int, int);
int add(int, int);

int calc(int a, int b, int (*func)(int, int)) {
    return func(a, b);
}
```
在调用的时候`calc(10, 20, add)`即可。
