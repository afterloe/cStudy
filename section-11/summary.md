Linux 网络编程
===

Socket本身有“插座”的意思，在Linux环境下，用于表示进程间网络通信的特殊文件类型。本质为内核借助缓冲区形成的伪文件

## 字节序大小端转换
为使网络程序具有可移植性，使同样的C代码在大端和小端计算机上编译后都能正常运行，可以调用以下库函数做网络字节序和主机字节序的转换。

## Socket Server && Client

`socket()`打开一个网络通讯端口，如果成功的话，就像 open()一样返回一个文件描述符，应用程序可以像读写文件一样用 read/write 在网络上收发数据，如果 socket()调用出错则返回-1。   
* 对于 IPv4，domain 参数指定为 AF_INET。   
* 对于 TCP 协议，type 参数指定为 SOCK_STREAM，表示面向流的传输协议。如果是 UDP 协议，则 type 参数指定为 SOCK_DGRAM，表示面向数据报的传输协议。
* protocol 参数的介绍从略，指定为 0 即可


代码参考:
[IPV6 Server](case_3.c) / [IPV6 Client](case_4.c)       

重点api 可以参考 [socket_api.md](./socket_api.md)

## 高并发服务器

使用多进程并发服务器时要考虑以下几点：

1. 父进程最大文件描述个数(父进程中需要 close 关闭 accept 返回的新文件描述符)
2. 系统内创建进程个数(与内存大小相关)
3. 进程创建过多是否降低整体服务性能(进程调度)
4. 调整进程内最大文件描述符上限
5. 线程如有共享数据，考虑线程同步
6. 服务于客户端线程退出时，退出处理。（退出值，分离态）
7. 系统负载，随着链接客户端增加，导致其它线程不能及时得到 CPU

## 多路I/O转接服务器
多路 IO 转接服务器也叫做多任务 IO 服务器。该类服务器实现的主旨思想是，不再由应用程序自己监视客户端连接，取而代之由内核替应用程序监视文件。

### SELECT
select 能监听的文件描述符个数受限于 FD_SETSIZE，一般为 1024，单纯改变进程打开的文件描述符个数并不能改变 select 监听文件个数。
1024 以下客户端时使用 select 是很合适的，但如果链接客户端过多，select 采用的是轮询模型，会大大降低服务器响应效率，不应在 select 上投入更多精力。

> 参考代码[case_5.c](casr_5.c) / [相关API - SELECT](./socket_api.md)   